{{define "endgame"}}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/endgame.css">
    <title>Fin de partie</title>
  
</head>
<body>
    <div class="container">
        <div id="messageContainer"></div>
        <div class="buttons">
            <button id="replayButton" onclick="replay()">Rejouer</button>
            <button id="homeButton" onclick="goHome()">Accueil</button>
        </div>
    </div>

    <script>
        // Vérifier si une partie est en cours
        const gameInProgress = localStorage.getItem('gameInProgress');
        if (gameInProgress === 'true') {
            window.location.href = '/endgame';
        }

        // Messages prédéfinis
        const victoryMessages = [
            {title: "Félicitations !", subtitle: "Une victoire bien méritée !"},
            {title: "Bravo champion !", subtitle: "Tu as fait preuve d'une grande habileté !"},
            {title: "Incroyable victoire !", subtitle: "Tu as relevé le défi avec brio !"}
        ];

        const defeatMessages = [
            {title: "Partie terminée !", subtitle: "Ne baisse pas les bras, réessaie !"},
            {title: "Dommage !", subtitle: "La prochaine sera la bonne !"},
            {title: "Pas de chance !", subtitle: "Tu feras mieux la prochaine fois !"}
        ];

        // Récupérer le résultat de la partie (à adapter selon votre logique de jeu)
        const gameResult = localStorage.getItem('gameResult');
        const isVictory = gameResult === 'victory';

        // Sélectionner un message aléatoire
        function getRandomMessage(messages) {
            return messages[Math.floor(Math.random() * messages.length)];
        }

        // Afficher le message
        function displayMessage() {
            const messages = isVictory ? victoryMessages : defeatMessages;
            const message = getRandomMessage(messages);
            const container = document.getElementById('messageContainer');
            
            container.innerHTML = `
                <div class="message ${isVictory ? 'victory' : 'defeat'}">${message.title}</div>
                <div class="sub-message">${message.subtitle}</div>
            `;
        }

        // Fonctions pour les boutons
        function replay() {
            localStorage.setItem('gameInProgress', 'true');
            window.location.href = '/game';
        }

        function goHome() {
            localStorage.removeItem('gameInProgress');
            localStorage.removeItem('gameResult');
            window.location.href = '/home';
        }

        // Initialiser la page
        displayMessage();
    </script>
</body>
</html>
{{end}}